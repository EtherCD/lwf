# Liteweight Format Specs

LWF - Ультра компактный формат записи данных по схеме которая описывает: вложенность, порядок. Использует представление данных как у JSON. Предназначен для максимальной компактивизации данных, и для использования его с сжатием.

Формат представляет данные как блоки без вложенностей и порядка. Блок содержит в себе записанные данные последовательно, без указания к какому полю относятся эти данные. Указание к каким полям, или-же обьектам относятся данные описываются в схеме.

Текущая спецификация прибита больше к JSON, и к JavaScript.

Проблемы:

-   Вложенные обьекты в массивы должны иметь одинаковую структуру.
-   Для корректной работы требуется полная схема развёртки данных.
-   Скорость значительно ниже чем у JSON, с.м. [[Эффективность]]

Использование:

-   Отлично подходит для отправок пакетов между сервером и клиентом, особенно если данные в них имеют само-подобную строктуру
-   Хранение карт, или иных не достаточно больших обьектов.

## Спецификация схемы:

1. key:
   Наиминование поля по которому обьект описанный в схеме будет записан в родительский обьект. Может быть пропущен для корневой схемы
2. args:
   Массив с именами полей которые будут записанны в таком-же порядке что и в схеме. Может быть пропущен для isArray, или isKeyObject, в таком случае данные будут записаны последовательно
3. types:
   Может быть пропущен если типизация полная не возможна, ну или-же по иным причинам. Указывает явно какие типы данных будут храниться. При чёткой спецификации можно избежать указания дополнительного байта с типом. И так-же добавить дополнительные проверки для не-бинаного вида формата
4. isArray:
   Указывает что обьект является массивом, и в таком случае вся остальная схема будет использована для описания вложенных в массив обьектов.
5. isKeyObject:
   Указывает что обьект имеет уникальные ключи, в таком случае они будут записаны в самом начале данных, и так-же будут обрабатываться как обычный массив.

### Типизация:

В формате представленны такие типы:

Int - 00
Negative Int - 01
Bool - 02
Char - 03
String - 04
Empty - 05
EmptyDepth - 06
Null - 07

## Хранение данных

Данные в обычном представлении будут записаны в подобном синтаксисе

```
. - ключ схемы
a[String,10,23.02,+]
```

Экранирование так-же доступно.

В бинарном виде данные будут записаны так:

```
00 - ключ
// динамически типизированное значение
00 00 - обозначение, и значение
// статически
00 - просто значение
```

Формат предпологает и учитывает возможное отсутвие данных, или-же просто пропуски их. В таком случае статическая типизация не возможна, и требуется записать `any` в тип.

```
In lwf:
a[,,]
In lwfb:
06

Пропуск на несколько обьектов, пропускаем 2 элемента

In lwf:
a[,,,,]
In lwfb:
06 01
```
